# RLNT WEAPON HUD

### FRESH INSTALL INSTRUCTIONS

These instructions will guide you through the installation.<br>
Make sure that there **aren't any of our scripts installed**! This is really important since you mess up the old installation if you don't follow the right instructions. In case you have any of the RLNT scripts installed make sure to follow these install instructions instead: [click me][custom]!<br>
The whole site is kept noob-friendly. There are many steps to guide you through the right installation. Don't be confused if you have to skip any steps.<br>
<br>
*Let's start!*

<br>
<br>

### CLIENT INSTALLATION


<br>

1. **DOWNLOAD:**
	- Download the latest [Fresh-Release.zip][releases]!
		>Make sure you download *Fresh-Release.zip* since it includes different files than other releases. If you download the wrong file this might mess up your old RLNT script installations.

	- Extract the *Fresh-Release.zip*.


<br>

2. **FILE-MANAGEMENT:**
	- Open the extracted files.
	- **In there** open the *Client* folder.
	- Move the *rlnt* folder and the *stringTable.xml* **into** your *mission.pbo*.
		>*mission.pbo* is just a placeholder. Your mission is called something like *Dayz_Epoch_11.Chernarus* depending on the map you're playing on. It's the same directory where your *init.sqf* and *description.ext* is located.

		>If you already have an existing *stringTable.xml* you need to merge them!

	- Check if you have a custom *compiles.sqf* or not.
		- If you **don't have a custom** *compiles.sqf* continue reading [Option A - Compiles](#compilesA).
		- If you **have a custom** *compiles.sqf* continue reading [Option B - Compiles](#compilesB).


<br>
<a name="compilesA"></a>

3. **OPTION A - COMPILES:**
	- Open the **downloaded files** and go to **"Client/dayz_code/init"**. Move the *compiles.sqf* **into** your **"mission.pbo/dayz_code/init"** folder.
		>If that folder doesn't exist create it since we try to keep the original file structure of Epoch.

	- Go to your *mission.pbo* and open the *init.sqf*. Find the following line:
		```sqf
		call compile preprocessFileLineNumbers "\z\addons\dayz_code\init\compiles.sqf";
		```
	- Paste this line **below**:
		```sqf
		call compile preprocessFileLineNumbers "dayz_code\init\compiles.sqf";
		```
	- Continue reading [here](#init)!


<br>
<a name="compilesB"></a>

3. **OPTION B - COMPILES:**
	- Check if you have a custom *keyboard.sqf* or not.
		- If you **don't have a custom** *keyboard.sqf* continue reading [Option A - Keyboard](#keyboardA).
		- If you **have a custom** *keyboard.sqf* continue reading [Option B - Keyboard](#keyboardB).


<br>
<a name="keyboardA"></a>

4. **OPTION A - KEYBOARD:**
	- Open the **downloaded files** and go to **"Client/dayz_code/compile"**. Move the *keyboard.sqf* **into** your **"mission.pbo/dayz_code/compile"** folder.
	- Open your **custom** *compiles.sqf* and add the following line **below** the *!isDedicated* block:
		>If there is already a line defining the path of the *keyboard.sqf* replace it with that one.

		```sqf
		DZ_KeyDown_EH = compile preprocessFileLineNumbers "dayz_code\compile\keyboard.sqf";
		```
	- Continue reading [here](#init)!


<br>
<a name="keyboardB"></a>

4. **OPTION B - KEYBOARD:**
	- Open your **custom** *keyboard.sqf* and find the following codeblocks:
		```sqf
		_rifle = {
			2 call dz_fn_switchWeapon;
	        _handled = true;
	    };
	    _pistol = {
			3 call dz_fn_switchWeapon;
	        _handled = true;
	    };
	    _melee = { // Also works for rifle on back if DZE_TwoPrimaries = 2;
			4 call dz_fn_switchWeapon;
	        _handled = true;
	    };
	    _throwable = { // select next non empty throwable weapon
	        if (vehicle player == player) then {
	            _ammo_throwable = [];
	            _muzzles_throwable = [];
	            _weapon_throwable = [];
	            {
	                _weapon = _x;
	                _muzzles = getArray(configFile >> "cfgWeapons" >> _weapon >> "muzzles");
	                if (count _muzzles == 0) then { _muzzles = [_weapon ]; };
	                {
	                    _muzz = _x;
	                    {
	                        if (_x in magazines player) then {
	                            _ammo_throwable set [ count _ammo_throwable, getText(configFile >> "cfgMagazines" >> _x >> "ammo") ];
	                            _muzzles_throwable set [ count _muzzles_throwable, _muzz ];
	                            _weapon_throwable set [ count _weapon_throwable, _weapon ];
	                        };                      
	                    } forEach getArray(configFile >> "cfgWeapons" >> _weapon >> _muzz >> "magazines");
	                } forEach _muzzles;
	            } forEach ["Throw"];

	            _magCount = count _ammo_throwable;
	            if (_magCount > 0) then {
	                if (isNil "KB_CurrentThrowable") then { KB_CurrentThrowable = -1; };
	                _currentAmmo = (weaponState player) select 3;       
	                _idx = _ammo_throwable find _currentAmmo;
	                if (_idx >= 0) then { KB_CurrentThrowable = _idx; };
	                KB_CurrentThrowable = (KB_CurrentThrowable + 1) mod _magCount;
	                player selectWeapon (_muzzles_throwable select KB_CurrentThrowable);
	                _handled = true;
	            };
	        };
		};
		```
	- **Replace** them with this code:
		```sqf
		_whToggle = {
			call RLNT_wh_toggleHUD;
			_handled = true;
		};
		_whPrimary = {
			2 call dz_fn_switchWeapon;
			_handled = true;
		};
		_whSecondary = {
			4 call dz_fn_switchWeapon;
			_handled = true;
		};
		_whHandgun = {
			3 call dz_fn_switchWeapon;
			_handled = true;
		};
		_whItem1 = {
			rlnt_wh_item1 call RLNT_wh_selectAction;
			_handled = true;
		};
		_whItem2 = {
			rlnt_wh_item2 call RLNT_wh_selectAction;
			_handled = true;
		};
		```
	- Find the following lines and **remove** them:
		```sqf
		[[DIK_1], _rifle] call _addArray;
		[[DIK_2], _pistol] call _addArray;
		[[DIK_3], _melee] call _addArray;
		//[[DIK_4], _throwable] call _addArray;
		```
	- Find this line:
		```sqf
		diag_log "keyboard_keys reset";
		```
	- And paste the following code **above** it:
		```sqf
		if !(isNil "rlnt_wh_toggleKey") then {
			[rlnt_wh_toggleKey, _whToggle] call _addArray;
		};

		if (DZE_TwoPrimaries == 2) then {
			[[DIK_1], _whPrimary] call _addArray;
			[[DIK_2], _whSecondary] call _addArray;
			[[DIK_3], _whHandgun] call _addArray;
		} else {
			[[DIK_1], _whPrimary] call _addArray;
			[[DIK_2], _whHandgun] call _addArray;
			[[DIK_3], _whSecondary] call _addArray;
		};

		if (!(isNil "rlnt_wh_item1_key") && (rlnt_wh_itemAmount == 1)) then {
			[rlnt_wh_item1_key, _whItem1] call _addArray;
		};

		if (!(isNil "rlnt_wh_item1_key") && !(isNil "rlnt_wh_item2_key") && (rlnt_wh_itemAmount == 2)) then {
			[rlnt_wh_item1_key, _whItem1] call _addArray;
			[rlnt_wh_item2_key, _whItem2] call _addArray;
		};
		```


<br>
<a name="init"></a>

5. **INIT**:
	- Go to your *mission.pbo* and open your *init.sqf*. Paste the following line **below** the *!isDedicated* block:
		```sqf
		execVM "rlnt\addons\RLNT_init.sqf";  /*  RLNT-ADDITIONS  */
		```


<br>

6. **DESCRIPTION**:
	- Check if you have a *RscTitles* class somewhere or not!
		- If you **don't have a** *RscTitles* class continue reading [Option A - RscTitles](#rsctitlesA).
		- If you **have a** *RscTitles* class continue reading [Option B - RscTitles](#rsctitlesB)!


<br>
<a name="rsctitlesA"></a>

7. **OPTION A - RSCTITLES:**
	- Open the **downloaded files** and go to **"Client/dayz_code/gui"**. Move the *description.hpp* **into** your **"mission.pbo/dayz_code/gui"** folder.
	- Go to your *mission.pbo* and open your *description.ext*. Find the following line:
		```sqf
		#include "\z\addons\dayz_code\gui\description.hpp"
		```
	- **Replace** it with the this line:
		```sqf
		#include "dayz_code\gui\description.hpp"
		```
	- Find the this codeblock:
		```sqf
		class Header
		{
			gameType = COOP;            //DM, Team, Coop, ...
			minPlayers = 1;             //min # of players the mission supports
			maxPlayers = 100;           //Max # of players the mission supports
		};
		```
	- Paste the following codeblock **underneath** it:
		```sqf
		class RscTitles {
			#include "rlnt\graphics\RLNT_displays.hpp"  /*  RLNT-ADDITIONS  */
			class wm_disp {
				idd = -1;
				onLoad = "uiNamespace setVariable ['wm_disp', _this select 0]";
				fadein = 0;
				fadeout = 0;
				duration = 10e10;
				controlsBackground[] = {};
				objects[] = {};
				class controls {
					class wm_text2 {
						idc = 1;
						x = safeZoneX+0.027;//safeZoneW*0.01;
						y = safeZoneY+safeZoneH-0.16;
						w = 0.151*safeZoneH;
						h = 0.057*safeZoneH;
						shadow = 2;
						class Attributes
						{
							font = "EtelkaNarrowMediumPro";
							color = "#24FFFFFF";
							align = "left"; // put "center" here if you want some background
							valign = "middle";
							shadow = 2;
						};
						colorBackground[] = { 1, 0.3, 0, 0 };  // uncomment and increase 4th number to have a background
						font = "EtelkaNarrowMediumPro";
						size = 0.06*safeZoneH;
						type = 13;
						style = 0;
						text="";
					};
				};
			};
		};
		```
	- Continue reading [here](#done)!


<br>
<a name="rsctitlesB"></a>

7. **OPTION B - RSCTITLES:**
	- Paste the following line **into** your *RscTitles* class:
		```sqf
		#include "rlnt\graphics\RLNT_displays.hpp"  /*  RLNT-ADDITIONS  */
		```


<br>

8. **INFISTAR**:
	- Check if you have *infiSTAR* or not!
		- If you **have** *infiSTAR* do [these steps][infistar].
		- If you **don't have** *infiSTAR* you are done and you can go back to the [main post][mainpost]!



<!-- Some ASCII art to keep the guide active -->
<br><br>
```
################################################################################################################
################################################################################################################
###############++++++++++++++++++#########################################++++++++##############################
#############+++'''''''''''''''''+++++++################################++''''''''##############################
############++';;;;;;;;;;;;;;;;;;;;;''''++#############################+'';;;;;;;;##############################
############+'::,,,,,,,,,,,,,,,,,,,,:::;;''+##########################++;:,,,,,,,,##############################
###########+';:..````````````````......,,::;'#########################+';,.```````##############################
###########+';,.`                 ``````..,,:;########################+':,``     `##############################
###########+';,`                        ```.,:;#######################+':.`       ##############################
###########+';,`                           ``.,+######################+':.`       ##############################
###########+';,`                             `.,######################+':.`       ##############################
###########+';,`                              `.,#####################+':.`       ##############################
###########+';,`                               `.#####################+':.`       ##############################
###########+';,`                                `:####################+':.`       ##############################
###########+';,`       :#########:```           `.####################+':.`       ##############################
###########+';,`       :###########+.``          `####################+':.`       ##############################
###########+';,`       :############+,.``        `'###################+':.`       ##############################
###########+';,`       :#############',.``        ,++++++++++++++++###+':.`       ##############################
###########+';,`       :##############;,.`        `++++++++++++++++++#+':.`       ##############################
###########+';,`       :##############';,.`       `++++++++++++++++++#+':.`       ##############################
###########+';,`       :############+++':,`       `++++++++++++++++++#+':.`       ##############################
###########+';,`       :##########+++++';,.`      `++++++++++++++++++#+':.`       ##############################
###########+';,`       :########++++++#+;:.`       ++++++++++++++++++#+':.`       ##############################
###########+';,`       :######++++++++#+':.`       ++++++++++++++++++#+':.`       ++############################
###########+';,`       :####+++++++++##+':.`      `++++++++++++++++++#+':.`       +++###########################
###########+';,`       :###++++++++++##+;,.`      ;++++++++++++++++++#+':.`       +++++#########################
###########+';,`       :#+++++++++++##+';,`       +++++++++++++++++++#+':.`       ++++++########################
###########+';,`       :++++++++#####++;:.`       +++++++++++++++++++#+':.`       ++++++++######################
###########+';,`       `.,;'+####++++';:,.`      `+++++++++++++++++++#+':.`       +++++++++#####################
###########+';,`       `.,:''++++'''';:,.`       ++++++++++++++++++++#+':.`       ++++++++++####################
###########+';,`        `.,:;;;;;;;::,..`        ++++++++++++++++++++#+':.`       ++++++++++++##################
###########+';,`        ``.,,,,,,,,...``        +++++++++++++++++++++#+':.`       +++++++++++++#################
###########+';,`         ```.....`````         ;+++++++++++++++++++++#+':.`       ++++++++++++++################
###########+';,`            ````              `++++++++++++++++++++++#+':.`       +++++++++++++++###############
###########+';,`                             `+++++++++++++++++++++++#+':.`       ++++++++++++++++##############
###########+';,`                            :++++++++++++++++++++++++#+':.`       +++++++++++++++++#############
###########+';,`                           ++++++++++++++++++++++++++#+':.`       +++++++++++++++++#############
###########+';,`                         '+++++++++++++++++++++++++++#+':.`       ++++++++++++++++++############
###########+';,`                       ++++++++++++++++++++++++++++++#+':.`       +++++++++++++++++++###########
###########+';,`                      +++++++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++##########
###########+';,`       ,+              ++++++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++##########
###########+';,`       :+````          ++++++++++++++++++++++++++++++#+':.`       +++++++++++++++++++++#########
###########+';,`       :++..``         `+++++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++########
#########+#+';,`       :++:,,.`        `'++++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++########
#########+#+';,`       :+++::,`        `.++++++++++++++++++++++++++++#+':.`       +++++++++++++++++++++++#######
########++#+';,`       :+++';,.`        `'+++++++++++++++++++++++++++#+':.`       +++++++++++++++++++++++#######
########++#+';,`       :++++':,`        `.+++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++######
#######+++#+';,`       :+++++;:.`        `;++++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++######
#######+++#+';,`       :+++++';,``       `.++++++++++++++++++++++++++#+':.`       +++++++++++++++++++++++++#####
######++++#+';,`       :++++++;:.`        `:+++++++++++++++++++++++++#+':.`       +++++++++++++++++++++++++#####
######++++#+';,`       :++++++';,.`       `.+++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++++####
#####+++++#+';,`       :+++++++;:.`        `,++++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++++####
#####+++++#+';,`       :+++++++';,.`       `.++++++++++++++++++++++++#+':.`       +++++++++++++++++++++++++++###
#####+++++#+';,`       :++++++++':.`        `,+++++++++++++++++++++++#+':.`       +++++++++++++++++++++++++++###
####++++++#+';,`       :++++++++';,.`       `.+++++++++++++++++++++++#+':.`       +++++++++++++++++++++++++++###
####++++++#+';,`       :+++++++++':.`        `.++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++++++##
####++++++#+';,`       :+++++++++';,.`       `.++++++++++++++++++++++#+':.`       ++++++++++++++++++++++++++++##
###+++++++#+';,`       :++++++++++':.`        `.+++++++++++++++++++++#+':.`       `.:;++#############+++++++++##
###+++++++#+';,`       :++++++++++';,.`       `.+++++++++++++++++++++#+':.`       `.,;''++++++++++++++++++++++##
###+++++++#+';,`       :+++++++++++':,`        `.++++++++++++++++++++#+':.`       ``.:;;;;;;;;;;;;;;;++++++++++#
###+++++++#+';,`       :+++++++++++';,.`       `.'+++++++++++++++++++#+':.`        `..,,,,,,,,,,,,,,:++++++++++#
###+++++++#+';,`       :++++++++++++':,`        `.+++++++++++++++++++#+':.`         ```..............++++++++++#
##++++++++#+';,`       :+++++++++++++;,.`       ``'++++++++++++++++++#+':.`            ``````````````++++++++++#
##++++++++#+';,`       :+++++++++++++':,`        `.++++++++++++++++++#+':.`                          ++++++++++#
##++++++++#+';,`       :++++++++++++++;:.`        `;+++++++++++++++++#+':.`                          +++++++++++
##++++++++#+';,`       :++++++++++++++':,`        `.+++++++++++++++++#+':.`                          +++++++++++
##++++++++#+';,`       :+++++++++++++++;:.`        `:++++++++++++++++#+':.`                          +++++++++++
##++++++++#+';,`       :+++++++++++++++';,``       `.++++++++++++++++#+':.`                          +++++++++++
##++++++++#+';,`       :++++++++++++++++;:.`       ``,+++++++++++++++#+':.`                          +++++++++++
##++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++
#############++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++###
#############################+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++##########
##########+++++++++++###########+++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++#############
#########';.````````````@########++++++++++';,``````````#########+++;'```````````````````````````````@##########
#########';.```````````` @########+++++++++';,``````````###########+;'```````````````````````````````@##########
#########';.```````````` +@########++++++++';,``````````###########+;'```````````````````````````````@##########
#########';.````````````  @@#######++++++++';,``````````###########+;'```````````````````````````````@##########
#########';.````````````` `@#########++++++';,``````````###########+''```````````````````````````````@##########
#########';``````````````  #@#########+++++'',``````````@##########+''```````````````````````````````@##########
#########';```````````````  @@########+#+++'',``````````@##########+'+```````````````````````````````@##########
#########';```````````````  `@#############'',``````````@@#########+++##########``````````:@@@@@@@@@@###########
#########';````````````````` #@############';,``````````@@#########++##########+``````````:@@@@@@@@@############
#########';```````````````````@@###########';,``````````@@#########+#########+''``````````:@####################
#########';```````````````````.@###########';,``````````@@##########+########+;;``````````:@####################
#########';````````````````````#@##########';,``````````@@#########+##+######+;;``````````:@####################
#########';`````````````````````@@#########+;,``````````@@##########++++#####+;;``````````:@####################
#########';`````````````````````,@#########+;,``````````@@##########+++++####+;;``````````:@####################
#########';``````````````````````@@########+;,``````````@@#########++++++####+;'``````````:@####################
#########';```````````````````````@@#######+;,``````````@@#########+++++++###+;'``````````:@####################
#########';```````````:```````````:@#######+;,``````````@@#########+++++++###+;'``````````:@####################
#########';```````````@````````````@@######+;,``````````@@##########++++++###+;'``````````:@####################
#########';```````````@#````````````@@#####+;,``````````@@#########+++++++###+;'``````````:@####################
#########';```````````@#,```````````;@#####+;,``````````@@#########++++++++##+;'``````````:@####################
#########';```````````@@#````````````@@####+;,``````````@@#########++++++++##+;'``````````:@####################
#########';```````````@@##````````````@@###+;,``````````@@##########+++++++##+;'``````````:@####################
#########';```````````@@##.```````````'@###+;,``````````@@##########++++++###+;'``````````:@####################
#########';```````````@@#+#````````````@@##+;,``````````@@###########++++++##+;'``````````:@####################
#########';```````````@@#+#+````````````@@#+;,``````````@@###########+++++###+;'``````````:@####################
#########';```````````@@##+#.```````````+@#';,``````````@@###########++++####+;'``````````:@####################
#########';```````````@@##++#````````````@@';,``````````@@###########+#++####+;'``````````:@####################
#########';```````````@@###+++````````````@#;,``````````@@#############++####+;;``````````:@####################
#########';```````````@@####+#````````````#@;,``````````@@#############+#####+;;``````````:@####################
#########';```````````@@####++#````````````@',``````````@@###################+;;``````````:@####################
#########';```````````@@#####+++````````````#.``````````@@###################+;;``````````:@####################
#########';```````````@@######++````````````#,``````````@@###################+;;``````````:@####################
#########';```````````@@######+++````````````,``````````@@###################+;;``````````:@####################
#########';```````````@@#######++'``````````````````````@@###################+;;``````````:@####################
#########';```````````@@#######+++``````````````````````@@###################+;;``````````:@####################
#########+;```````````@@########+++`````````````````````@@###################+;;``````````:@####################
#########+;```````````@@#########++;````````````````````@@###################+;;``````````:@####################
#########+;```````````@@#########+++````````````````````@@###################+;;``````````:@####################
#########+;```````````@@##########+++```````````````````@@###################+;;``````````:@####################
#########+;```````````@@###########++:``````````````````@@###################+;;``````````:@####################
#########+;```````````@@###########+++  ````````````````@@###################+;;``````````:@####################
#########+;```````````@@############+++  ```````````````@@###################+;;``````````:@####################
#########+;```````````@@############+++,  ``````````````@@###################+;;``````````:@####################
#########+;```````````@@#############+++  ``````````````@@###################+;;``````````:@####################
#########+;```````````@@##############+++  `````````````@@###################+;;``````````:@####################
#########+;```````````@@##############+++. `````````````@@###################+;;``````````:@####################
#########+;```````````@@###############+++  ````````````@@###################+;;``````````:@####################
#########+;```````````@@################+++ ````````````@@###################+;;``````````:@####################
#########+;```````````@@################+++.````````````@@###################+;;``````````:@####################
#########+;```````````@@#################+++````````````@@###################+;;``````````:@####################
#########+'.``````````@@##################+++```````````@@###################+''``````````:@####################
#########+'.``````````@@##################++#```````````@@###################+'+``````````:@####################
#########++##@@@@@@@@@@####################+###@@@@@@@@@@#####################+###@@@@@@@@@@####################
#############@@@@@@@@@#########################@@@@@@@@@######################+###@@@@@@@@@#####################
################################################################################################################
```


<!-- Links -->
[custom]: https://github.com/RLNT/RLNT_WeaponHUD/blob/master/installation/custom.md "Go to source"
[releases]: https://github.com/RLNT/RLNT_WeaponHUD/releases "Go to source"
[mainpost]: https://github.com/RLNT/RLNT_WeaponHUD#config "Go to source"
[infistar]: https://github.com/RLNT/RLNT_WeaponHUD/blob/master/installation/infistar.md "Go to source"
